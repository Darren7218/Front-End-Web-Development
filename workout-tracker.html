<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Workout Tracker - FitnessTech</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="app.js"></script>
<style>
body { font-family: 'Segoe UI', sans-serif; background:#fafafa; transition:background 0.3s, color 0.3s; }

/* Navbar */
.navbar { box-shadow: 0 2px 6px rgba(0,0,0,0.05); }
.navbar .nav-link { color:#333; }
.navbar .nav-link:hover { color:#007bff; }

/* Header */
.header { text-align:center; padding:40px 20px; background:#f8f9fa; border-bottom:1px solid #ddd; }
.header h2 { font-size:2rem; font-weight:bold; }

/* Card Styling */
.card-custom {
  background:#fff;
  border-radius:10px;
  padding:20px;
  box-shadow:0 2px 8px rgba(0,0,0,0.05);
  margin-bottom:20px;
  transition:background 0.3s, color 0.3s;
}
.card-custom h3 { font-size:1.3rem; margin-bottom:15px; }

/* Table Styling */
.table th, .table td { vertical-align:middle; }
.table thead th { background:#f1f1f1; transition:background 0.3s; }

/* Share Icons */
.icon-btn-img {
  display:inline-flex;
  justify-content:center;
  align-items:center;
  width:40px;
  height:40px;
  border-radius:50%;
  background:#fff;
  overflow:hidden;
  margin:0 6px;
  border:1px solid #ccc;
  box-shadow:0 1px 3px rgba(0,0,0,0.1);
}
.icon-btn-img img { width:70%; height:70%; object-fit:contain; }

/* Footer */
.footer {
  background:#fff;
  padding:20px;
  text-align:center;
  border-top:1px solid #ddd;
  transition:background 0.3s, color 0.3s;
}
.footer hr { margin:15px auto; width:90%; }

/* Dark Mode Styles */
body.dark-mode { background:#121212; color:#e0e0e0; }
body.dark-mode .navbar { background:#1e1e1e !important; }
body.dark-mode .navbar .nav-link,
body.dark-mode .navbar .navbar-brand { color:#fff !important; }
body.dark-mode .navbar .nav-link:hover { color:#f0ad4e !important; }
body.dark-mode .header { background:#1e1e1e; border-bottom-color:#333; }
body.dark-mode .card-custom { background:#1f1f1f; color:#e0e0e0; }
body.dark-mode .table thead th { background:#333; color:#fff; }
body.dark-mode .footer { background:#1e1e1e; color:#ccc; }
body.dark-mode .icon-btn-img { background:#2a2a2a; border-color:#555; }
</style>
</head>
<body>

<!-- Navbar -->
<nav class="navbar navbar-expand-lg navbar-light bg-light px-3">
  <a class="navbar-brand fw-bold" href="index.html">FitnessTech</a>
  <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
    <span class="navbar-toggler-icon"></span>
  </button>
  <div class="collapse navbar-collapse" id="navbarNav">
    <ul class="navbar-nav ms-auto">
      <li class="nav-item"><a class="nav-link" href="index.html">Home</a></li>
      <li class="nav-item"><a class="nav-link" href="fitness-gadgets.html">Gadgets</a></li>
      <li class="nav-item"><a class="nav-link active" href="workout-tracker.html">Workout Tracker</a></li>
      <li class="nav-item"><a class="nav-link" href="contact.html">Contact</a></li>
      <li class="nav-item"><a class="nav-link" href="dashboard.html">Dashboard</a></li>
      <li class="nav-item"><a class="nav-link" href="login.html" id="navLogin">Login</a></li>
      <li class="nav-item"><a class="nav-link" href="#" id="navLogout" style="display:none;" onclick="logout();return false;">Logout</a></li>
      <li class="nav-item">
        <button id="darkModeToggle" class="btn btn-outline-secondary btn-sm ms-3">üåô Dark Mode</button>
      </li>
    </ul>
  </div>
</nav>

<script>
document.addEventListener('DOMContentLoaded', () => {
  if(sessionStorage.getItem('isLoggedIn')==='true'){
    document.getElementById('navLogin').style.display='none';
    document.getElementById('navLogout').style.display='inline';
  }

  // Dark Mode Toggle
  const toggleBtn = document.getElementById('darkModeToggle');
  const isDark = localStorage.getItem('darkMode') === 'true';
  if(isDark) document.body.classList.add('dark-mode');

  toggleBtn.textContent = isDark ? '‚òÄÔ∏è Light Mode' : 'üåô Dark Mode';

  toggleBtn.addEventListener('click', () => {
    document.body.classList.toggle('dark-mode');
    const dark = document.body.classList.contains('dark-mode');
    localStorage.setItem('darkMode', dark);
    toggleBtn.textContent = dark ? '‚òÄÔ∏è Light Mode' : 'üåô Dark Mode';
  });
});
</script>

<!-- Header -->
<section class="header">
  <h2>Workout Tracker</h2>
  <p class="text-muted">Log your exercises and share your fitness progress easily.</p>
</section>

<!-- Main Content -->
<div class="container mt-4">
  <div class="row">
    <!-- Add Workout Form -->
    <div class="col-md-4">
      <div class="card-custom">
        <h3>Add Workout</h3>
        <form id="wForm">
          <div class="mb-3">
            <label class="form-label">Date</label>
            <input class="form-control" id="date" type="date" required>
          </div>
          <div class="mb-3">
            <label class="form-label">Exercise</label>
            <input class="form-control" id="ex" required placeholder="Push Ups">
          </div>
          <div class="mb-3">
            <label class="form-label">Duration (min)</label>
            <input class="form-control" id="du" type="number" min="1" required>
          </div>
          <div class="mb-3">
            <label class="form-label">Calories</label>
            <input class="form-control" id="cal" type="number" min="0" required>
          </div>
          <button class="btn btn-primary w-100" type="submit">Save Workout</button>
        </form>
      </div>
    </div>

    <!-- Workout List -->
    <div class="col-md-8">
      <div class="card-custom">
        <h3>Your Workouts</h3>
        <div id="workoutContainer" class="mt-3"></div>
        <button class="btn btn-danger mt-3" id="clearAll">Clear All</button>
        <hr>
        <h4>Share Your Workouts</h4>
        <div class="sharebar mt-2" id="shareWorkouts"></div>
      </div>
    </div>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', () => {
  document.getElementById('date').valueAsDate = new Date();
  render();
});

function getList() { return JSON.parse(localStorage.getItem('workouts')||'[]'); }
function setList(arr) { localStorage.setItem('workouts', JSON.stringify(arr)); }

function groupByDate(list) {
  return list.reduce((acc, w) => {
    acc[w.date] = acc[w.date] || [];
    acc[w.date].push(w);
    return acc;
  }, {});
}

function render() {
  const container = document.getElementById('workoutContainer');
  container.innerHTML = '';
  const grouped = groupByDate(getList());
  for (const date in grouped) {
    const section = document.createElement('div');
    section.innerHTML = `<h5 class="mt-3">${date}</h5>`;
    const table = document.createElement('table');
    table.className = 'table table-bordered table-striped';
    table.innerHTML = '<thead><tr><th>Exercise</th><th>Duration</th><th>Calories</th><th>Action</th></tr></thead>';
    const tbody = document.createElement('tbody');
    grouped[date].forEach((w, i) => {
      const tr = document.createElement('tr');
      tr.innerHTML = `<td>${w.exercise}</td><td>${w.duration} min</td><td>${w.calories}</td>
        <td><button class="btn btn-sm btn-outline-danger" data-date="${date}" data-i="${i}">Delete</button></td>`;
      tbody.appendChild(tr);
    });
    table.appendChild(tbody);
    section.appendChild(table);
    container.appendChild(section);
  }
  updateShareButtons();
}

document.getElementById('wForm').addEventListener('submit', (e) => {
  e.preventDefault();
  const w = {
    date: date.value,
    exercise: ex.value.trim(),
    duration: +du.value,
    calories: +cal.value
  };
  if (!w.exercise || !w.duration) { alert('Please enter valid data'); return; }
  const list = getList();
  list.push(w);
  setList(list);
  render();
  e.target.reset();
  date.valueAsDate = new Date();
});

document.getElementById('workoutContainer').addEventListener('click', (e) => {
  if (e.target.matches('button[data-i]')) {
    const d = e.target.getAttribute('data-date');
    const i = +e.target.getAttribute('data-i');
    const grouped = groupByDate(getList());
    grouped[d].splice(i, 1);
    const newList = Object.values(grouped).flat();
    setList(newList);
    render();
  }
});

document.getElementById('clearAll').addEventListener('click', () => {
  if (confirm('Clear all workouts?')) {
    localStorage.removeItem('workouts');
    render();
  }
});

function updateShareButtons() {
  const allWorkouts = getList();
  if (allWorkouts.length === 0) {
    document.getElementById('shareWorkouts').innerHTML = '<p class="text-muted">No workouts to share.</p>';
    return;
  }
  const today = new Date().toISOString().split('T')[0];
  const todayWorkouts = allWorkouts.filter(w => w.date === today);
  const summary = todayWorkouts.length > 0
    ? todayWorkouts.map(w => `${w.exercise} ${w.duration}min (${w.calories}cal)`).join(', ')
    : 'My fitness progress!';
  const text = encodeURIComponent(`My workout summary: ${summary}`);
  const url = encodeURIComponent(window.location.href);
  document.getElementById('shareWorkouts').innerHTML = `
    <a href="https://api.whatsapp.com/send?text=${text}" target="_blank" class="icon-btn-img"><img src="images/whatsapp.png" alt="WhatsApp"></a>
    <a href="https://www.facebook.com/sharer/sharer.php?u=${url}" target="_blank" class="icon-btn-img"><img src="images/facebook.png" alt="Facebook"></a>
    <a href="https://twitter.com/intent/tweet?text=${text}" target="_blank" class="icon-btn-img"><img src="images/x.png" alt="Twitter"></a>
  `;
}
</script>

<!-- Footer -->
<div class="footer mt-5">
  <p><strong>FitnessTech</strong> ‚Äî learn, track, and share your fitness journey.</p>
  <div class="share-icons mb-3">
    <a href="https://api.whatsapp.com/send?text=Check+out+FitnessTech" target="_blank" class="icon-btn-img"><img src="images/whatsapp.png" alt="WhatsApp"></a>
    <a href="https://www.facebook.com/sharer/sharer.php?u=https://example.com" target="_blank" class="icon-btn-img"><img src="images/facebook.png" alt="Facebook"></a>
    <a href="https://twitter.com/intent/tweet?text=Check+out+FitnessTech" target="_blank" class="icon-btn-img"><img src="images/x.png" alt="Twitter"></a>
  </div>
  <hr>
  <h6>Quick Links</h6>
  <p>
    <a href="index.html">Home</a> |
    <a href="fitness-gadgets.html">Gadgets</a> |
    <a href="workout-tracker.html">Workout Tracker</a> |
    <a href="contact.html">Contact</a> |
    <a href="dashboard.html">Dashboard</a>
  </p>
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
