<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Gadgets (API Demo)</title>
<link rel="stylesheet" href="styles.css">
<script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
<script src="app.js"></script>

</head>
<body>

<div class="navbar">
  <a class="brand" href="index.html">FitnessTech</a>
  <a href="index.html">Home</a>
  <a href="fitness-gadgets.html">Gadgets (API)</a>
  <a href="workout-tracker.html">Workout Tracker</a>
  <a href="contact.html">Contact</a>
  <span style="flex:1"></span>
  <a href="dashboard.html">Dashboard</a>
  <a href="login.html" id="navLogin">Login</a>
  <a href="#" id="navLogout" style="display:none" onclick="logout();return false;">Logout</a>
</div>
<script>
  document.addEventListener('DOMContentLoaded', () => {
    const loggedIn = sessionStorage.getItem('isLoggedIn') === 'true';
    const navLogin = document.getElementById('navLogin');
    const navLogout = document.getElementById('navLogout');
    if(loggedIn){ if(navLogin) navLogin.style.display='none'; if(navLogout) navLogout.style.display='inline'; }
  });
</script>

<div class="container">

<h2>Fitness Gadgets & Exercises (API)</h2>
<p class="notice">This page demonstrates a <strong>RESTful API call with jQuery</strong>. We fetch exercise info from the public <em>wger</em> API and render cards. If it fails, we fall back to a secondary demo API.</p>
<div class="grid" id="cards"></div>
<script>
function renderItem(title, desc, img){
  const div=document.createElement('div');div.className='card';
  div.innerHTML=`<img alt="${title}" src="${img||'https://images.unsplash.com/photo-1517836357463-d25dfeac3438?w=800'}">
  <div class='p'><h4>${title}</h4><p><small class='muted'>${desc||'No description'}</small></p>
  <div class='sharebar' id='share-${title.replace(/\W/g,'')}' style='margin-top:8px'></div></div>`;
  document.getElementById('cards').appendChild(div);
  const linkText=encodeURIComponent(`I found a cool exercise: ${title}`);
  const pageUrl=encodeURIComponent(window.location.href.split('#')[0]);
  const bar=div.querySelector('.sharebar');
  bar.innerHTML=`<a href="https://api.whatsapp.com/send?text=${linkText}%20${pageUrl}" target="_blank" rel="noopener">WhatsApp</a>
                 <a href="https://www.facebook.com/sharer/sharer.php?u=${pageUrl}" target="_blank" rel="noopener">Facebook</a>
                 <a href="https://twitter.com/intent/tweet?text=${linkText}&url=${pageUrl}&hashtags=fitness,tech" target="_blank" rel="noopener">Twitter</a>`;
}
function loadPrimary(){ return $.get('https://wger.de/api/v2/exerciseinfo/?limit=8', function(data){
  (data.results||[]).forEach(item=>{
    const title=item.name||'Exercise';
    const desc=(item.description||'').replace(/<[^>]*>?/gm,'').slice(0,120);
    let img=null; if(item.images&&item.images.length){img=item.images[0].image;}
    renderItem(title, desc, img);
  });
});}
function loadFallback(){ return $.get('https://dummyjson.com/products?limit=6', function(data){
  (data.products||[]).forEach(p=>{ renderItem(p.title, p.description, p.thumbnail); });
});}
$(function(){ loadPrimary().fail(loadFallback); });
</script>

</div>

<div class="footer">
  <div class="container">
    <p><strong>FitnessTech</strong> â€” learn, track, and share your fitness journey.</p>
    <div id="sharebar" class="sharebar"></div>
    <script>document.addEventListener('DOMContentLoaded',()=>{renderShareBar('sharebar',{text:'Check out this Fitness Tech page!'});});</script>
    <hr>
    <div class="grid">
      <div>
        <p><strong>Quick Links</strong></p>
        <p><a href="index.html">Home</a><br><a href="fitness-gadgets.html">Gadgets</a><br><a href="workout-tracker.html">Workout Tracker</a></p>
      </div>
      <div>
        <p><strong>Facebook Page Plugin (example)</strong></p>
        <div class="notice">Below is a demo Facebook Page plugin iframe to satisfy the "social media plugin" requirement.</div>
        <div style="max-width:340px">
          <iframe title="Facebook Page Plugin" style="border:none;overflow:hidden;width:100%;height:140px"
            src="https://www.facebook.com/plugins/page.php?href=https%3A%2F%2Fwww.facebook.com%2FFacebookDevelopers&tabs=timeline&width=340&height=140&small_header=true&adapt_container_width=true&hide_cover=false&show_facepile=false">
          </iframe>
        </div>
      </div>
    </div>
  </div>
</div>
<div id="cookiebar" class="cookiebar">
  <div class="container">
    <strong>We use cookies</strong> to remember your preferences (like your username).
    <button class="btn" onclick="acceptCookies()">Accept</button>
  </div>
</div>


</body>
</html>